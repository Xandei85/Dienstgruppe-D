<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Schichtkalender Polizei – v4</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header>
    <h1>Schichtkalender Polizei – v4</h1>
    <div class="toolbar">
      <button id="btnWhiteToYellow" title="Ausgewählte Zellen: Weiß → Gelb">Weiß → Gelb</button>
      <button id="btnYellowToWhite" title="Ausgewählte Zellen: Gelb → Weiß">Gelb → Weiß</button>
      <span class="divider"></span>
      <button id="btnATZA6" title="ATZA 6 in die Auswahl schreiben">ATZA 6</button>
      <button id="btnATZA12" title="ATZA 12 in die Auswahl schreiben">ATZA 12</button>
      <span class="divider"></span>
      <button id="btnPraktikant" title="Praktikant-Zeile in Auswahl an/aus">Praktikant ±</button>
      <span class="divider"></span>
      <button id="btnClearSelection" title="Auswahl aufheben">Auswahl aufheben</button>
      <span class="divider"></span>
      <button id="btnSave" title="Lokal speichern">Lokal speichern</button>
      <button id="btnLoad" title="Lokal laden">Lokal laden</button>
      <button id="btnExport" title="Als JSON exportieren">Export</button>
      <label class="import-label">
        Import <input type="file" id="fileImport" accept="application/json"/>
      </label>
      <button id="btnReset" class="danger" title="Tabelle leeren (aktueller Monat)">Alles löschen</button>
    </div>

    <div class="toolbar secondary">
      <span class="cloud-label">☁️ Supabase</span>
      <button id="btnCloudSave" title="In Supabase speichern">Cloud speichern</button>
      <button id="btnCloudLoad" title="Aus Supabase laden">Cloud laden</button>
      <button id="btnCloudDelete" class="danger" title="Eintrag in Supabase löschen">Cloud löschen</button>
      <small id="cloudStatus" class="status">nicht verbunden</small>
    </div>
  </header>

  <main>
    <section class="meta">
      <label>Monat:
        <input type="month" id="monthPicker"/>
      </label>
      <button id="btnBuildMonth">Monat aufbauen</button>
      <small class="hint">Hinweis: Lokal = Browser (localStorage). Cloud = Supabase-DB.</small>
    </section>

    <section id="calendarWrapper"></section>
  </main>

  <footer>
    <details>
      <summary>Info & Hilfe</summary>
      <ul>
        <li>Supabase muss in <code>config.js</code> konfiguriert sein (URL + anon Key).</li>
        <li>Cloud-Buttons speichern/lesen <b>monatsspezifisch</b> per Schlüssel <code>YYYY-MM</code>.</li>
        <li>Tabellenname: <code>schedules</code>. Spalten: <code>ym</code> (TEXT, PK), <code>data</code> (JSONB), <code>updated_at</code> (TIMESTAMPTZ).</li>
      </ul>
    </details>
  </footer>

  <!-- Supabase JS v2 from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
